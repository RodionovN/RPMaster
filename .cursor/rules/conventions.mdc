---
alwaysApply: true
---

# Правила разработки кода для RPMaster

## Основные принципы

-   **KISS** - делай максимально просто, избегай сложных решений
-   **YAGNI** - не добавляй функциональность "на будущее", только то что нужно сейчас
-   **Минимализм** - меньше зависимостей, меньше абстракций, меньше кода

## TypeScript

-   Используй строгую типизацию для всех функций и компонентов
-   Избегай `any`, используй `unknown` если тип неизвестен
-   Создавай простые интерфейсы/типы, избегай сложных generic'ов
-   Экспортируй типы из отдельных файлов только если используются в нескольких местах

## React Native компоненты

-   Используй только нативные компоненты React Native (View, Text, Button, ScrollView, FlatList)
-   Не используй UI библиотеки (React Native Paper, NativeBase и т.д.)
-   Стилизация через StyleSheet, избегай inline стилей
-   Компоненты должны быть простыми и делать одну вещь
-   Используй функциональные компоненты с хуками

## Управление состоянием

-   Используй Context API для глобального состояния
-   Создавай отдельные Context'ы для разных доменов (Battle, Players, Monsters, Settings)
-   Избегай излишней вложенности Context'ов
-   Используй локальное состояние (useState) когда возможно

## Структура кода

-   Один файл = одна ответственность
-   Функции должны быть короткими и делать одну вещь
-   Избегай глубокой вложенности (максимум 2-3 уровня)
-   Предпочитай явный код неявному
-   Не создавай абстракции "на будущее"

## Обработка ошибок

-   Используй try-catch для асинхронных операций
-   Показывай понятные сообщения об ошибках пользователю
-   Не скрывай ошибки, логируй их для отладки
-   Валидация данных простая - проверка обязательных полей

## Именование

-   Имена должны быть понятными и описывать назначение
-   Используй camelCase для переменных и функций
-   Используй PascalCase для компонентов и типов
-   Избегай сокращений, кроме общепринятых (id, hp, ac)

## Комментарии

-   Код должен быть самодокументируемым
-   Комментируй только сложную бизнес-логику
-   Не комментируй очевидное

## Импорты

-   Группируй импорты: внешние библиотеки, внутренние модули, типы
-   Используй абсолютные пути для внутренних импортов (если настроено)
-   Не создавай barrel exports (index.ts) без необходимости

## Производительность

-   Используй React.memo только если есть реальные проблемы производительности
-   Используй useMemo/useCallback только при необходимости
-   Не оптимизируй преждевременно

## Тестирование

-   Пиши простые unit тесты для критической логики (броски кубиков, расчет инициативы)
-   Не тестируй тривиальный код
-   Тесты должны быть понятными и простыми
